/*!
 * jCarousel - Riding carousels with jQuery
 *   http://sorgalla.com/jcarousel/
 *
 * Copyright (c) 2006 Jan Sorgalla (http://sorgalla.com)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Built on top of the jQuery library
 *   http://jquery.com
 *
 * Inspired by the "Carousel Component" by Bill Scott
 *   http://billwscott.com/carousel/
 *
 * Modify by Sergey Predvoditelev
 *   http://predvoditelev.ru/
 *
 */

(function(g){var s={vertical:!1,rtl:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,setupCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,animationStepCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",
buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},p=!1;g(window).bind("load.jcarousel",function(){p=!0});g.jcarousel=function(b,c){var a,e;this.options=g.extend({},s,c||{});this.autoStopped=this.locked=!1;this.buttonPrevState=this.buttonNextState=this.buttonPrev=this.buttonNext=this.list=this.clip=this.container=null;if(!c||void 0===c.rtl)this.options.rtl="rtl"==(g(b).attr("dir")||g("html").attr("dir")||"").toLowerCase();this.wh=!this.options.vertical?"width":"height";this.lt=
!this.options.vertical?this.options.rtl?"right":"left":"top";a="";e=b.className.split(" ");for(var d=0;d<e.length;d++)if(-1!=e[d].indexOf("jcarousel-skin")){g(b).removeClass(e[d]);a=e[d];break}"UL"==b.nodeName.toUpperCase()||"OL"==b.nodeName.toUpperCase()?(this.list=g(b),this.clip=this.list.parents(".jcarousel-clip"),this.container=this.list.parents(".jcarousel-container")):(this.container=g(b),this.list=this.container.find("ul,ol").eq(0),this.clip=this.container.find(".jcarousel-clip"));0===this.clip.size()&&
(this.clip=this.list.wrap("<div></div>").parent());0===this.container.size()&&(this.container=this.clip.wrap("<div></div>").parent());""!==a&&-1==this.container.parent()[0].className.indexOf("jcarousel-skin")&&this.container.wrap('<div class=" '+a+'"></div>');this.buttonPrev=g(".jcarousel-prev",this.container);0===this.buttonPrev.size()&&null!==this.options.buttonPrevHTML&&(this.buttonPrev=g(this.options.buttonPrevHTML).appendTo(this.container));this.buttonPrev.addClass(this.className("jcarousel-prev"));
this.buttonNext=g(".jcarousel-next",this.container);0===this.buttonNext.size()&&null!==this.options.buttonNextHTML&&(this.buttonNext=g(this.options.buttonNextHTML).appendTo(this.container));this.buttonNext.addClass(this.className("jcarousel-next"));this.clip.addClass(this.className("jcarousel-clip")).css({position:"relative"});this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css(this.options.rtl?"right":"left",0);this.container.addClass(this.className("jcarousel-container")).css({position:"relative"});
!this.options.vertical&&this.options.rtl&&this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl");var k=null!==this.options.visible?Math.ceil(this.clipping()/this.options.visible):null;a=this.list.children("li");var f=this;if(0<a.size()){var h=0,j=this.options.offset;a.each(function(){f.format(this,j++);h+=f.dimension(this,k)});this.list.css(this.wh,h+100+"px");if(!c||void 0===c.size)this.options.size=a.size()}this.container.css("display","block");this.buttonNext.css("display","block");
this.buttonPrev.css("display","block");this.funcNext=function(){f.next();return!1};this.funcPrev=function(){f.prev();return!1};this.funcResize=function(){f.resizeTimer&&clearTimeout(f.resizeTimer);f.resizeTimer=setTimeout(function(){f.reload()},100)};null!==this.options.initCallback&&this.options.initCallback(this,"init");if(a=!p)a=navigator.userAgent,a=a.toLowerCase(),e=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||
0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[],a=e[1]||"",e=e[2]||"0",d={},a&&(d[a]=!0,d.version=e),d.chrome?d.webkit=!0:d.webkit&&(d.safari=!0),a=d.safari?!0:!1;a?(this.buttons(!1,!1),g(window).bind("load.jcarousel",function(){f.setup()})):this.setup()};var d=g.jcarousel;d.fn=d.prototype={jcarousel:"0.2.8"};d.fn.extend=d.extend=g.extend;d.fn.extend({setup:function(){this.prevLast=this.prevFirst=this.last=this.first=null;this.animating=!1;this.tail=this.resizeTimer=this.timer=
null;this.inTail=!1;if(!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var b=this.pos(this.options.start,!0);this.prevFirst=this.prevLast=null;this.animate(b,!1);g(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize);null!==this.options.setupCallback&&this.options.setupCallback(this)}},reset:function(){this.list.empty();this.list.css(this.lt,"0px");this.list.css(this.wh,"10px");null!==this.options.initCallback&&this.options.initCallback(this,
"reset");this.setup()},reload:function(){null!==this.tail&&this.inTail&&this.list.css(this.lt,d.intval(this.list.css(this.lt))+this.tail);this.tail=null;this.inTail=!1;null!==this.options.reloadCallback&&this.options.reloadCallback(this);if(null!==this.options.visible){var b=this,c=Math.ceil(this.clipping()/this.options.visible),a=0,e=0;this.list.children("li").each(function(d){a+=b.dimension(this,c);d+1<b.first&&(e=a)});this.list.css(this.wh,a+"px");this.list.css(this.lt,-e+"px")}this.scroll(this.first,
!1)},lock:function(){this.locked=!0;this.buttons()},unlock:function(){this.locked=!1;this.buttons()},size:function(b){void 0!==b&&(this.options.size=b,this.locked||this.buttons());return this.options.size},has:function(b,c){if(void 0===c||!c)c=b;null!==this.options.size&&c>this.options.size&&(c=this.options.size);for(var a=b;a<=c;a++){var e=this.get(a);if(!e.length||e.hasClass("jcarousel-item-placeholder"))return!1}return!0},get:function(b){return g(">.jcarousel-item-"+b,this.list)},add:function(b,
c){var a=this.get(b),e=0,r=g(c);if(0===a.length)for(var k,f=d.intval(b),a=this.create(b);;){if(k=this.get(--f),0>=f||k.length){0>=f?this.list.prepend(a):k.after(a);break}}else e=this.dimension(a);"LI"==r.get(0).nodeName.toUpperCase()?(a.replaceWith(r),a=r):a.empty().append(c);this.format(a.removeClass(this.className("jcarousel-item-placeholder")),b);r=null!==this.options.visible?Math.ceil(this.clipping()/this.options.visible):null;e=this.dimension(a,r)-e;0<b&&b<this.first&&this.list.css(this.lt,d.intval(this.list.css(this.lt))-
e+"px");this.list.css(this.wh,d.intval(this.list.css(this.wh))+e+"px");return a},remove:function(b){var c=this.get(b);if(c.length&&!(b>=this.first&&b<=this.last)){var a=this.dimension(c);b<this.first&&this.list.css(this.lt,d.intval(this.list.css(this.lt))+a+"px");c.remove();this.list.css(this.wh,d.intval(this.list.css(this.wh))-a+"px")}},next:function(){null!==this.tail&&!this.inTail?this.scrollTail(!1):this.scroll(("both"==this.options.wrap||"last"==this.options.wrap)&&null!==this.options.size&&
this.last==this.options.size?1:this.first+this.options.scroll)},prev:function(){null!==this.tail&&this.inTail?this.scrollTail(!0):this.scroll(("both"==this.options.wrap||"first"==this.options.wrap)&&null!==this.options.size&&1==this.first?this.options.size:this.first-this.options.scroll)},scrollTail:function(b){if(!this.locked&&!this.animating&&this.tail){this.pauseAuto();var c=d.intval(this.list.css(this.lt)),c=!b?c-this.tail:c+this.tail;this.inTail=!b;this.prevFirst=this.first;this.prevLast=this.last;
this.animate(c)}},scroll:function(b,c){!this.locked&&!this.animating&&(this.pauseAuto(),this.animate(this.pos(b),c))},pos:function(b,c){var a=d.intval(this.list.css(this.lt));if(this.locked||this.animating)return a;"circular"!=this.options.wrap&&(b=1>b?1:this.options.size&&b>this.options.size?this.options.size:b);for(var e=this.first>b,g="circular"!=this.options.wrap&&1>=this.first?1:this.first,k=e?this.get(g):this.get(this.last),f=e?g:g-1,h=null,j=0,l=!1,n=0;e?--f>=b:++f<b;){h=this.get(f);l=!h.length;
if(0===h.length&&(h=this.create(f).addClass(this.className("jcarousel-item-placeholder")),k[e?"before":"after"](h),null!==this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(0>=f||f>this.options.size)))k=this.get(this.index(f)),k.length&&(h=this.add(f,k.clone(!0)));k=h;n=this.dimension(h);l&&(j+=n);if(null!==this.first&&("circular"==this.options.wrap||1<=f&&(null===this.options.size||f<=this.options.size)))a=e?a+n:a-n}for(var g=this.clipping(),p=[],q=0,m=0,k=this.get(b-1),f=b;++q;){h=
this.get(f);l=!h.length;if(0===h.length){h=this.create(f).addClass(this.className("jcarousel-item-placeholder"));if(0===k.length)this.list.prepend(h);else k[e?"before":"after"](h);if(null!==this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(0>=f||f>this.options.size))k=this.get(this.index(f)),k.length&&(h=this.add(f,k.clone(!0)))}k=h;n=this.dimension(h);if(0===n)throw Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...");"circular"!=this.options.wrap&&
null!==this.options.size&&f>this.options.size?p.push(h):l&&(j+=n);m+=n;if(m>=g)break;f++}for(h=0;h<p.length;h++)p[h].remove();0<j&&(this.list.css(this.wh,this.dimension(this.list)+j+"px"),e&&(a-=j,this.list.css(this.lt,d.intval(this.list.css(this.lt))-j+"px")));j=b+q-1;"circular"!=this.options.wrap&&(this.options.size&&j>this.options.size)&&(j=this.options.size);if(f>j){q=0;f=j;for(m=0;++q;){h=this.get(f--);if(!h.length)break;m+=this.dimension(h);if(m>=g)break}}f=j-q+1;"circular"!=this.options.wrap&&
1>f&&(f=1);this.inTail&&e&&(a+=this.tail,this.inTail=!1);this.tail=null;"circular"!=this.options.wrap&&(j==this.options.size&&1<=j-q+1)&&(e=d.intval(this.get(j).css(!this.options.vertical?"marginRight":"marginBottom")),m-e>g&&(this.tail=m-g-e));c&&(b===this.options.size&&this.tail)&&(a-=this.tail,this.inTail=!0);for(;b-- >f;)a+=this.dimension(this.get(b));this.prevFirst=this.first;this.prevLast=this.last;this.first=f;this.last=j;return a},animate:function(b,c){if(!this.locked&&!this.animating){this.animating=
!0;var a=this,e=function(){a.animating=!1;0===b&&a.list.css(a.lt,0);!a.autoStopped&&("circular"==a.options.wrap||"both"==a.options.wrap||"last"==a.options.wrap||null===a.options.size||a.last<a.options.size||a.last==a.options.size&&null!==a.tail&&!a.inTail)&&a.startAuto();a.buttons();a.notify("onAfterAnimation");if("circular"==a.options.wrap&&null!==a.options.size)for(var c=a.prevFirst;c<=a.prevLast;c++)null!==c&&(!(c>=a.first&&c<=a.last)&&(1>c||c>a.options.size))&&a.remove(c)};this.notify("onBeforeAnimation");
if(!this.options.animation||!1===c)this.list.css(this.lt,b+"px"),e();else{var d=!this.options.vertical?this.options.rtl?{right:b}:{left:b}:{top:b},e={duration:this.options.animation,easing:this.options.easing,complete:e};g.isFunction(this.options.animationStepCallback)&&(e.step=this.options.animationStepCallback);this.list.animate(d,e)}}},startAuto:function(b){void 0!==b&&(this.options.auto=b);if(0===this.options.auto)return this.stopAuto();if(null===this.timer){this.autoStopped=!1;var c=this;this.timer=
window.setTimeout(function(){c.next()},1E3*this.options.auto)}},stopAuto:function(){this.pauseAuto();this.autoStopped=!0},pauseAuto:function(){null!==this.timer&&(window.clearTimeout(this.timer),this.timer=null)},buttons:function(b,c){if(null==b&&(b=!this.locked&&0!==this.options.size&&(this.options.wrap&&"first"!=this.options.wrap||null===this.options.size||this.last<this.options.size),!this.locked&&(!this.options.wrap||"first"==this.options.wrap)&&null!==this.options.size&&this.last>=this.options.size))b=
null!==this.tail&&!this.inTail;if(null==c&&(c=!this.locked&&0!==this.options.size&&(this.options.wrap&&"last"!=this.options.wrap||1<this.first),!this.locked&&(!this.options.wrap||"last"==this.options.wrap)&&null!==this.options.size&&1==this.first))c=null!==this.tail&&this.inTail;var a=this;0<this.buttonNext.size()?(this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext),b&&this.buttonNext.bind(this.options.buttonNextEvent+".jcarousel",this.funcNext),this.buttonNext[b?"removeClass":
"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",b?!1:!0),null!==this.options.buttonNextCallback&&this.buttonNext.data("jcarouselstate")!=b&&this.buttonNext.each(function(){a.options.buttonNextCallback(a,this,b)}).data("jcarouselstate",b)):null!==this.options.buttonNextCallback&&this.buttonNextState!=b&&this.options.buttonNextCallback(a,null,b);0<this.buttonPrev.size()?(this.buttonPrev.unbind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),c&&this.buttonPrev.bind(this.options.buttonPrevEvent+
".jcarousel",this.funcPrev),this.buttonPrev[c?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",c?!1:!0),null!==this.options.buttonPrevCallback&&this.buttonPrev.data("jcarouselstate")!=c&&this.buttonPrev.each(function(){a.options.buttonPrevCallback(a,this,c)}).data("jcarouselstate",c)):null!==this.options.buttonPrevCallback&&this.buttonPrevState!=c&&this.options.buttonPrevCallback(a,null,c);this.buttonNextState=b;this.buttonPrevState=c},notify:function(b){var c=
null===this.prevFirst?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",b,c);this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",b,c,this.first),this.callback("itemFirstOutCallback",b,c,this.prevFirst));this.prevLast!==this.last&&(this.callback("itemLastInCallback",b,c,this.last),this.callback("itemLastOutCallback",b,c,this.prevLast));this.callback("itemVisibleInCallback",b,c,this.first,this.last,this.prevFirst,this.prevLast);this.callback("itemVisibleOutCallback",
b,c,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(b,c,a,e,d,k,f){if(!(null==this.options[b]||"object"!=typeof this.options[b]&&"onAfterAnimation"!=c)){var h="object"==typeof this.options[b]?this.options[b][c]:this.options[b];if(g.isFunction(h)){var j=this;if(void 0===e)h(j,a,c);else if(void 0===d)this.get(e).each(function(){h(j,this,e,a,c)});else{b=function(b){j.get(b).each(function(){h(j,this,b,a,c)})};for(var l=e;l<=d;l++)null!==l&&!(l>=k&&l<=f)&&b(l)}}}},create:function(b){return this.format("<li></li>",
b)},format:function(b,c){b=g(b);for(var a=b.get(0).className.split(" "),d=0;d<a.length;d++)-1!=a[d].indexOf("jcarousel-")&&b.removeClass(a[d]);b.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+c)).css({"float":this.options.rtl?"right":"left","list-style":"none"}).attr("jcarouselindex",c);return b},className:function(b){return b+" "+b+(!this.options.vertical?"-horizontal":"-vertical")},dimension:function(b,c){var a=g(b);if(null==c)return!this.options.vertical?a.innerWidth()+
d.intval(a.css("margin-left"))+d.intval(a.css("margin-right"))+d.intval(a.css("border-left-width"))+d.intval(a.css("border-right-width"))||d.intval(this.options.itemFallbackDimension):a.innerHeight()+d.intval(a.css("margin-top"))+d.intval(a.css("margin-bottom"))+d.intval(a.css("border-top-width"))+d.intval(a.css("border-bottom-width"))||d.intval(this.options.itemFallbackDimension);var e=!this.options.vertical?c-d.intval(a.css("marginLeft"))-d.intval(a.css("marginRight")):c-d.intval(a.css("marginTop"))-
d.intval(a.css("marginBottom"));g(a).css(this.wh,e+"px");return this.dimension(a)},clipping:function(){return!this.options.vertical?this.clip[0].offsetWidth-d.intval(this.clip.css("borderLeftWidth"))-d.intval(this.clip.css("borderRightWidth")):this.clip[0].offsetHeight-d.intval(this.clip.css("borderTopWidth"))-d.intval(this.clip.css("borderBottomWidth"))},index:function(b,c){null==c&&(c=this.options.size);return Math.round(((b-1)/c-Math.floor((b-1)/c))*c)+1}});d.extend({defaults:function(b){return g.extend(s,
b||{})},intval:function(b){b=parseInt(b,10);return isNaN(b)?0:b},windowLoaded:function(){p=!0}});g.fn.jcarousel=function(b){if("string"==typeof b){var c=g(this).data("jcarousel"),a=Array.prototype.slice.call(arguments,1);return c[b].apply(c,a)}return this.each(function(){var a=g(this).data("jcarousel");a?(b&&g.extend(a.options,b),a.reload()):g(this).data("jcarousel",new d(this,b))})}})(jQuery);
